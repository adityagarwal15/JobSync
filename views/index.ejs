<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Metadata -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>JobSync</title>
  <meta name="author" content="JobSync" />
  <meta name="description"
    content="JobSync â€“ AI-powered job portal for real-time opportunities, mentorship, and smart career insights." />
  <meta name="theme-color" content="#000000" />

  <!-- Performance Optimizations -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="dns-prefetch" href="https://unpkg.com" />
  <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com" />

  <!-- Global Styles -->
  <link rel="stylesheet" href="/css/global.css" />
  <link rel="stylesheet" href="/css/loader.css" />

  <!-- Navigation & Menu -->
  <link rel="stylesheet" href="/css/nav.css" />
  <link rel="stylesheet" href="/css/menu.css" />

  <!-- Sections -->
  <link rel="stylesheet" href="/css/hero.css" />
  <link rel="stylesheet" href="/css/about.css" />
  <link rel="stylesheet" href="/css/services.css" />
  <link rel="stylesheet" href="/css/promo.css" />
  <link rel="stylesheet" href="/css/projects.css" />
  <link rel="stylesheet" href="/css/prices-hero.css" />
  <link rel="stylesheet" href="/css/prices.css" />
  <link rel="stylesheet" href="/css/features.css" />
  <link rel="stylesheet" href="/css/footer.css" />



  <!-- Favicon & Web Manifest -->
  <link rel="icon" type="image/svg+xml" href="/assets/favicon-32x32.svg" />
  <link rel="icon" type="image/png" href="/assets/favicon-96x96.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicon-180x180.png" />
  <link rel="manifest" href="/assets/site.webmanifest" />
  <meta name="msapplication-TileImage" content="/assets/favicon-192x192.png" />
  <meta name="msapplication-config" content="/assets/browserconfig.xml" />

  <!--Fonts-->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Manrope:wght@200..800&display=swap"
    rel="stylesheet">

  <!-- External Libraries -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

  <!-- Icons (Ionicons) -->
  <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>

  <!-- Spline Viewer -->
  <script type="module" src="https://unpkg.com/@splinetool/viewer/build/spline-viewer.js"></script>

  <style>
    /* chatbot modal */
    .chatbot-modal {
      display: none;
      position: fixed;
      z-index: 10000;
      bottom: 100px;
      right: 20px;
      animation: fadeIn 0.3s ease;
    }

    .chatbot-modal.show {
      display: block;
    }

    .chatbot-modal-content {
      position: relative;
      animation: slideUp 0.3s ease;
    }

    /* chatbot styles */
    .chat {
      width: 350px;
      height: 450px;
      overflow: hidden;
      box-shadow:
        0 20px 40px rgba(0, 0, 0, 0.4),
        0 0 0 1px rgba(255, 255, 255, 0.05),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
      background: rgba(15, 15, 15, 0.85);
      backdrop-filter: blur(20px);
      border-radius: 16px;
      display: flex;
      flex-direction: column;
      border: 1px solid rgba(255, 255, 255, 0.08);
      position: relative;
    }

    .chat-title {
      flex: 0 0 60px;
      position: relative;
      z-index: 2;
      background: linear-gradient(135deg, rgba(25, 25, 25, 0.9), rgba(35, 35, 35, 0.8));
      color: #fff;
      text-align: left;
      padding: 15px 15px 15px 65px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: 16px 16px 0 0;
    }

    .chat-title h1,
    .chat-title h2 {
      font-weight: normal;
      margin: 0;
      padding: 0;
    }

    .chat-title h1 {
      font-size: 14px;
      font-weight: 600;
      color: #ffffff;
      letter-spacing: 0.5px;
    }

    .chat-title h2 {
      color: rgba(255, 255, 255, .6);
      font-size: 10px;
      letter-spacing: 1px;
      margin-top: 2px;
      text-transform: uppercase;
    }

    .chat-title .avatar {
      position: absolute;
      z-index: 1;
      top: 12px;
      left: 15px;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      overflow: hidden;
      margin: 0;
      padding: 0;
      border: 2px solid rgba(120, 119, 198, 0.3);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      background: linear-gradient(135deg, #7877c6, #ff77c6);
    }

    .chat-title .avatar img {
      width: 100%;
      height: auto;
    }

    .close-chatbot {
      position: absolute;
      top: 15px;
      right: 15px;
      background: none;
      border: none;
      color: rgba(255, 255, 255, 0.6);
      font-size: 24px;
      cursor: pointer;
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: all 0.3s ease;
    }

    .close-chatbot:hover {
      background: rgba(255, 255, 255, 0.1);
      color: rgba(255, 255, 255, 0.9);
    }

    .messages {
      flex: 1 1 auto;
      color: rgba(255, 255, 255, .8);
      overflow-y: auto !important;
      overflow-x: hidden;
      position: relative;
      width: 100%;
      height: 100%;
      max-height: 300px;
      padding: 20px;
      scrollbar-width: thin;
      scrollbar-color: rgba(120, 119, 198, 0.5) transparent;
      -webkit-overflow-scrolling: touch;
      scroll-behavior: smooth;
    }

    .messages::-webkit-scrollbar {
      width: 6px;
    }

    .messages::-webkit-scrollbar-track {
      background: transparent;
    }

    .messages::-webkit-scrollbar-thumb {
      background: rgba(120, 119, 198, 0.5);
      border-radius: 3px;
    }

    .messages::-webkit-scrollbar-thumb:hover {
      background: rgba(120, 119, 198, 0.7);
    }

    .messages-content {
      width: 100%;
      min-height: 100%;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .message {
      clear: both;
      float: left;
      padding: 12px 16px;
      border-radius: 18px 18px 18px 4px;
      background: rgba(25, 25, 25, 0.8);
      backdrop-filter: blur(10px);
      margin: 12px 0;
      font-size: 12px;
      line-height: 1.5;
      margin-left: 50px;
      position: relative;
      max-width: 75%;
      word-wrap: break-word;
      border: 1px solid rgba(255, 255, 255, 0.05);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    }

    .message .timestamp {
      position: absolute;
      bottom: -20px;
      font-size: 9px;
      color: rgba(255, 255, 255, .4);
    }

    .message::before {
      content: '';
      position: absolute;
      bottom: -6px;
      border-top: 6px solid rgba(25, 25, 25, 0.8);
      left: 0;
      border-right: 7px solid transparent;
    }

    .message .avatar {
      position: absolute;
      z-index: 1;
      bottom: -20px;
      left: -50px;
      border-radius: 50%;
      width: 35px;
      height: 35px;
      overflow: hidden;
      margin: 0;
      padding: 0;
      border: 2px solid rgba(120, 119, 198, 0.3);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      background: linear-gradient(135deg, #7877c6, #ff77c6);
    }

    .message .avatar img {
      width: 100%;
      height: auto;
    }

    .message-content {
      width: 100%;
    }

    .structured-list {
      margin: 0;
      padding: 0;
    }

    .list-item {
      margin: 6px 0;
      padding-left: 0;
      line-height: 1.6;
      display: block;
    }

    .list-item.numbered {
      font-weight: 500;
      color: rgba(255, 255, 255, 0.9);
    }

    .list-item.bulleted {
      font-weight: 400;
      color: rgba(255, 255, 255, 0.85);
    }

    .message.message-personal {
      float: right;
      color: #fff;
      text-align: right;
      background: linear-gradient(135deg, #7877c6, #ff77c6);
      backdrop-filter: blur(10px);
      border-radius: 18px 18px 4px 18px;
      margin-left: 0;
      margin-right: 0;
      border: 1px solid rgba(255, 255, 255, 0.1);
      box-shadow: 0 6px 20px rgba(120, 119, 198, 0.3);
    }

    .message.message-personal::before {
      left: auto;
      right: 0;
      border-right: none;
      border-left: 5px solid transparent;
      border-top: 4px solid #ff77c6;
      bottom: -4px;
    }

    .message:last-child {
      margin-bottom: 30px;
    }

    .message.new {
      transform: scale(0);
      transform-origin: 0 0;
      animation: bounce 500ms linear both;
    }

    .message.loading span {
      display: block;
      font-size: 0;
      width: 20px;
      height: 10px;
      position: relative;
    }

    .message.loading span::before,
    .message.loading span::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      display: block;
      width: 3px;
      height: 3px;
      border-radius: 50%;
      background: rgba(255, 255, 255, .5);
      z-index: 2;
      margin-top: 4px;
      animation: ball .45s cubic-bezier(0, 0, 0.15, 1) alternate infinite;
    }

    .message.loading span::before {
      margin-left: -7px;
    }

    .message.loading span::after {
      margin-left: 7px;
      animation-delay: .3s;
    }

    .message-box {
      flex: 0 0 70px;
      width: 100%;
      background: rgba(20, 20, 20, 0.8);
      backdrop-filter: blur(10px);
      padding: 15px;
      position: relative;
      border-top: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: 0 0 16px 16px;
    }

    .message-input {
      background: rgba(30, 30, 30, 0.8);
      border: 1px solid rgba(255, 255, 255, 0.1);
      outline: none !important;
      resize: none;
      color: rgba(255, 255, 255, .9);
      font-size: 12px;
      height: 40px;
      margin: 0;
      padding: 12px 80px 12px 16px;
      width: 100%;
      border-radius: 20px;
      backdrop-filter: blur(10px);
      transition: all 0.3s ease;
    }

    .message-input:focus {
      border-color: rgba(120, 119, 198, 0.5);
      box-shadow: 0 0 0 2px rgba(120, 119, 198, 0.1);
      background: rgba(35, 35, 35, 0.9);
    }

    .message-input::placeholder {
      color: rgba(255, 255, 255, 0.4);
    }

    .message-input:focus::placeholder {
      color: transparent;
    }

    .message-submit {
      position: absolute;
      z-index: 1;
      top: 48%;
      right: 18px;
      transform: translateY(-50%);
      color: #fff;
      border: none;
      background: linear-gradient(135deg, #7877c6, #ff77c6);
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      line-height: 1;
      padding: 12px 20px;
      border-radius: 16px;
      outline: none !important;
      transition: all 0.3s ease;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(120, 119, 198, 0.4);
    }

    .message-submit:hover {
      transform: translateY(-50%) translateY(-2px);
      box-shadow: 0 6px 20px rgba(120, 119, 198, 0.6);
    }

    .message-submit:disabled {
      background: rgba(60, 60, 60, 0.8);
      cursor: not-allowed;
      box-shadow: none;
      transform: translateY(-50%);
    }

    .error-message {
      background: rgba(255, 50, 50, 0.2) !important;
      color: #ffcccc;
      border: 1px solid rgba(255, 50, 50, 0.3) !important;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
      }

      to {
        opacity: 1;
      }
    }

    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(20px) scale(0.95);
      }

      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    @keyframes bounce {
      0% {
        transform: matrix3d(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);
      }

      4.7% {
        transform: matrix3d(0.45, 0, 0, 0, 0, 0.45, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);
      }

      9.41% {
        transform: matrix3d(0.883, 0, 0, 0, 0, 0.883, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);
      }

      14.11% {
        transform: matrix3d(1.141, 0, 0, 0, 0, 1.141, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);
      }

      18.72% {
        transform: matrix3d(1.212, 0, 0, 0, 0, 1.212, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);
      }

      24.32% {
        transform: matrix3d(1.151, 0, 0, 0, 0, 1.151, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);
      }

      29.93% {
        transform: matrix3d(1.048, 0, 0, 0, 0, 1.048, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);
      }

      35.54% {
        transform: matrix3d(0.979, 0, 0, 0, 0, 0.979, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);
      }

      41.04% {
        transform: matrix3d(0.961, 0, 0, 0, 0, 0.961, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);
      }

      52.15% {
        transform: matrix3d(0.991, 0, 0, 0, 0, 0.991, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);
      }

      63.26% {
        transform: matrix3d(1.007, 0, 0, 0, 0, 1.007, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);
      }

      85.49% {
        transform: matrix3d(0.999, 0, 0, 0, 0, 0.999, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);
      }

      100% {
        transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);
      }
    }

    @keyframes ball {
      from {
        transform: translateY(0) scaleY(.8);
      }

      to {
        transform: translateY(-10px);
      }
    }

    /* mobile responsive for chatbot */
    @media (max-width: 768px) {
      .chatbot-modal {
        bottom: 80px;
        right: 10px;
        left: 10px;
      }

      .chat {
        width: calc(100vw - 20px);
        max-width: 350px;
        height: 400px;
      }
    }

    @media (max-width: 480px) {
      .chatbot-modal {
        bottom: 70px;
        right: 5px;
        left: 5px;
      }

      .chat {
        width: calc(100vw - 10px);
        height: 350px;
      }
    }

    /* chatbot floating button */
    .floating-chatbot-btn {
      position: fixed;
      bottom: 32px;
      right: 32px;
      z-index: 9999;
      background: rgba(255, 255, 255, 0.18);
      color: #fff;
      border: none;
      border-radius: 50%;
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.18);
      width: 56px;
      height: 56px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: box-shadow 0.2s, transform 0.2s;
      text-decoration: none;
      padding: 0;
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
    }

    .floating-chatbot-btn:hover {
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.28);
      transform: translateY(-2px) scale(1.04);
      background: transparent;
    }

    .chatbot-svg-icon {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 32px;
      height: 32px;
    }

    .floating-chatbot-btn .chatbot-btn-text {
      display: none;
    }

    @media (max-width: 600px) {
      .floating-chatbot-btn {
        bottom: 80px;
        right: 20px;
        width: 56px;
        height: 56px;
        border-radius: 50%;
        padding: 0;
        justify-content: center;
        align-items: center;
        font-size: 1.6em;
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.18);
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
      }

      .chatbot-svg-icon {
        width: 32px;
        height: 32px;
      }

      .floating-chatbot-btn .chatbot-btn-text {
        display: none;
      }
    }

    .cursor {
      cursor: pointer !important;
    }

    .flash-messages {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 1000;
    }

    .flash-message {
      padding: 1rem 1.5rem;
      margin-bottom: 1rem;
      border-radius: 5px;
      color: white;
      font-weight: 500;
      min-width: 300px;
      animation: slideIn 0.3s ease;
    }

    .flash-success {
      background: linear-gradient(45deg, #28a745, #20c997);
    }

    .flash-error {
      background: linear-gradient(45deg, #dc3545, #e74c3c);
    }

    .flash-warning {
      background: linear-gradient(45deg, #ffc107, #f39c12);
    }

    .flash-info {
      background: linear-gradient(45deg, #17a2b8, #3498db);
    }

    .verification-banner {
      background: linear-gradient(45deg, #ffc107, #f39c12);
      color: white;
      padding: 1rem;
      text-align: center;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 999;
      font-weight: 500;
    }

    .verification-banner a {
      color: white;
      text-decoration: underline;
      font-weight: bold;
    }

    .verification-banner a:hover {
      color: #f8f9fa;
    }

    .user-status {
      display: flex;
      align-items: center;
      gap: 1rem;
      color: white;
      font-size: 0.9rem;
    }

    .user-name {
      font-weight: 600;
    }

    .logout-btn {
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.3);
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 5px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 0.9rem;
    }

    .logout-btn:hover {
      background: rgba(255, 255, 255, 0.2);
    }

    .resend-btn {
      background: rgba(255, 167, 38, 0.2);
      border: 1px solid rgba(255, 167, 38, 0.5);
      color: #ffa726;
      padding: 0.4rem 0.8rem;
      border-radius: 4px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 0.8rem;
      margin-left: 0.5rem;
    }

    .resend-btn:hover {
      background: rgba(255, 167, 38, 0.3);
    }

    .nav-with-banner {
      margin-top: 60px;
    }

    /* Menu user items styling */
    .user-menu-item {
      background: var(--color-text-secondary) !important;
      border: none;
      transition: all 0.3s ease;
    }

    .user-menu-item:hover {
      background: var(--color-text-secondary) !important;
      transform: translateY(-2px);
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
    }

    .logout-menu-item {
      background: var(--color-text-secondary) !important;
    }

    .logout-menu-item:hover {
      background: var(--color-text-secondary) !important;
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
    }

    .user-menu-item span {
      color: var(--color-bg) !important;
      font-weight: 500;
    }

    .user-menu-item i {
      font-size: 0.9em;
    }

    /* Menu item numbering for better visual hierarchy */
    .menu-item span:first-child {
      font-weight: 700;
      opacity: 0.7;
      font-size: 0.8em;
    }

    .menu-item span:last-child {
      font-weight: 500;
    }

    @keyframes slideIn {
      from {
        transform: translateX(100%);
        opacity: 0;
      }

      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    @media (max-width: 768px) {
      .user-auth {
        flex-direction: column;
        gap: 0.5rem;
      }

      .user-status {
        flex-direction: column;
        gap: 0.5rem;
        text-align: center;
      }

      .user-menu-item {
        margin: 0.1rem 0;
      }

      .user-menu-item span {
        font-size: 0.9rem;
      }
    }
  </style>
</head>




<body>
  <!-- Flash Messages -->
  <div class="flash-messages">
    <% if (success && success.length> 0) { %>
      <% success.forEach(function(msg) { %>
        <div class="flash-message flash-success">
          <i class="fas fa-check-circle"></i>
          <%= msg %>
        </div>
        <% }); %>
          <% } %>

            <% if (error && error.length> 0) { %>
              <% error.forEach(function(msg) { %>
                <div class="flash-message flash-error">
                  <i class="fas fa-exclamation-circle"></i>
                  <%= msg %>
                </div>
                <% }); %>
                  <% } %>

                    <% if (warning && warning.length> 0) { %>
                      <% warning.forEach(function(msg) { %>
                        <div class="flash-message flash-warning">
                          <i class="fas fa-exclamation-triangle"></i>
                          <%= msg %>
                        </div>
                        <% }); %>
                          <% } %>

                            <% if (info && info.length> 0) { %>
                              <% info.forEach(function(msg) { %>
                                <div class="flash-message flash-info">
                                  <i class="fas fa-info-circle"></i>
                                  <%= msg %>
                                </div>
                                <% }); %>
                                  <% } %>
  </div>

  <!-- Verification Banner for unverified users -->
  <% if (typeof user !=='undefined' && user && !user.isVerified) { %>
    <div class="verification-banner">
      <i class="fas fa-exclamation-triangle"></i>
      Please verify your email to access all features.
      <a href="#" onclick="resendVerification()">Resend verification email</a>
    </div>
    <% } %>

      <!-- loader -->
      <div class="loader">
        <div class="loader-copy">
          <p id="loader-copy-1">Loading in progress</p>

          <p id="loader-copy-2">A few seconds please</p>

          <p id="loader-copy-3">Almost done</p>
        </div>
        <div class="progress-bar"></div>

        <!-- Skip Loading Animation Button -->
        <button id="skip-loader-btn" class="skip-loader-btn">
          Skip
        </button>
      </div>

      <!-- navbar -->
      <nav class="<% if (typeof user !== 'undefined' && user && !user.isVerified) { %>nav-with-banner<% } %>">
        <div class="logo">
          <a href="#hero"><img src="./assets/site-logo.png" alt="" /></a>
        </div>

        <!-- <div class="clock">
          <p>
            ON
            <span id="currentTime"></span>
          </p>
        </div> -->

        <div class="user-auth">
          <% if (typeof user !=='undefined' && user) { %>
            <div style="display: flex; gap: 0.5rem;">
              <% if (user.isVerified) { %>
                <a href="/dashboard" class="auth-button" style="padding: 0.5rem 1rem; font-size: 0.9rem;">
                  <i class="fa-solid fa-tachometer-alt"></i>&nbsp;&nbsp;
                  Dashboard
                </a>
                <% } %>
            </div>
            <% } else { %>
              <!-- User is not logged in -->
              <div class="button">
                <a href="/login" class="auth-button">
                  <i class="fa-solid fa-right-to-bracket"></i>&nbsp;&nbsp;
                  Sign In
                </a>
              </div>
              <div class="button">
                <a href="/signup" class="auth-button auth-button-signup">
                  <i class="fa-solid fa-user-plus"></i>&nbsp;&nbsp;
                  Sign Up
                </a>
              </div>
              <% } %>
        </div>

        <div class="ctas">
          <div class="menu">
            <div class="menu-icon">
              <ion-icon name="close-sharp"></ion-icon>
            </div>
            <p>Menu</p>
          </div>
        </div>
      </nav>

      <!-- menu links -->
      <div class="menu-container">
        <div class="whitespace"></div>
        <div class="whitespace"></div>
        <div class="menu-items">
          <a href="#about" class="menu-item">
            <span>01</span>
            <span>Who we are</span>
          </a>
          <% if (typeof user !=='undefined' && user) { %>
            <!-- Profile - Only for logged in users -->
            <a href="/profile" class="menu-item user-menu-item">
              <span>02</span>
              <span><i class="fa-solid fa-user"></i>&nbsp;&nbsp;Profile</span>
            </a>
            <% } %>
              <a href="#cases" class="menu-item">
                <span>
                  <%= (typeof user !=='undefined' && user) ? '03' : '02' %>
                </span>
                <span>Features</span>
              </a>
              <a href="#prices" class="menu-item">
                <span>
                  <%= (typeof user !=='undefined' && user) ? '04' : '03' %>
                </span>
                <span>Subscription</span>
              </a>
              <% if (typeof user !=='undefined' && user) { %>
                <!-- Logout - Only for logged in users -->
                <form action="/logout" method="post">
                  <input type="hidden" name="_csrf" value="<%= csrfToken %>">
                  <button class="menu-item cursor user-menu-item logout-menu-item">
                    <span>05</span>
                    <span><i class="fa-solid fa-right-from-bracket"></i>&nbsp;&nbsp;Logout</span>
                  </button>
                </form>
                <% } %>
        </div>
      </div>

      <!-- website content -->
      <div class="container">
        <!-- hero section -->
        <section class="hero" id="hero">
          <div class="hero-img"><img src="./assets/grad.png" alt="" /></div>

          <div class="hero-header">
            <div class="hero-col">
              <h1>JobSync</h1>
            </div>
            <div class="hero-col">
              <p id="site-intro">
                Since 2025, JobSync has been revolutionizing the job search experience, leveraging AI-driven matching,
                real-time mentorship, and smart career insights to connect job seekers with their ideal opportunities
                effortlessly.
              </p>
            </div>
          </div>
        </section>

        <!-- about -->
        <section class="about" id="about">
          <div class="about-header">
            <div class="about-col">
              <p class="callout">How can we help</p>
            </div>
            <div class="about-col">
              <h2>
                Revolutionizing job searching with AI-driven matching, real-time mentorship, and career insights,
                seamlessly
                connecting job seekers with their ideal opportunities.
                <span style="opacity: 0">.</span>
              </h2>

              <p class="about-copy">
                Our team leverages cutting-edge AI technology and expert mentorship to empower job seekers with
                personalized
                recommendations and real-time alerts, driving success in their job search.
              </p>
            </div>
          </div>
        </section>


        <!-- services -->
        <section class="services" id="services">
          <div class="services-col">
            <p class="callout">We work with</p>
          </div>
          <div class="services-col">
            <div class="services-row">
              <div class="service-item">
                <div class="service-icon">
                  <ion-icon name="bulb-sharp"></ion-icon>
                  <!-- Updated AI Matching Icon -->
                </div>
                <div class="service-title">
                  <p>AI Matching</p>
                </div>
              </div>
              <div class="service-item">
                <div class="service-icon">
                  <ion-icon name="people-sharp"></ion-icon>
                  <!-- Updated Mentorship Icon -->
                </div>
                <div class="service-title">
                  <p>Mentorship</p>
                </div>
              </div>
              <div class="service-item">
                <div class="service-icon">
                  <ion-icon name="document-text-sharp"></ion-icon>
                  <!-- Updated Resume Analysis Icon -->
                </div>
                <div class="service-title">
                  <p>Resume Analysis</p>
                </div>
              </div>
              <div class="service-item">
                <div class="service-icon">
                  <ion-icon name="school-sharp"></ion-icon>
                  <!-- Updated Training Icon -->
                </div>
                <div class="service-title">
                  <p>Training</p>
                </div>
              </div>
            </div>
            <div class="services-row">
              <div class="service-item">
                <div class="service-icon">
                  <ion-icon name="analytics-sharp"></ion-icon>
                  <!-- Updated Insights Icon -->
                </div>
                <div class="service-title">
                  <p>Insights</p>
                </div>
              </div>
              <div class="service-item">
                <div class="service-icon">
                  <ion-icon name="chatbubbles-sharp"></ion-icon>
                  <!-- Updated Messaging Icon -->
                </div>
                <div class="service-title">
                  <p>Messaging</p>
                </div>
              </div>
              <div class="service-item">
                <div class="service-icon">
                  <ion-icon name="cloud-upload-sharp"></ion-icon>
                  <!-- Updated Cloud Icon -->
                </div>
                <div class="service-title">
                  <p>Cloud</p>
                </div>
              </div>
              <div class="service-item">
                <div class="service-icon">
                  <ion-icon name="lock-closed-sharp"></ion-icon>
                  <!-- Updated Security Icon -->
                </div>
                <div class="service-title">
                  <p>Security</p>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- promo  -->
        <section class="promo" id="cases">
          <div class="promo-bg">
            <img src="./assets/grad.png" alt="" />
          </div>
          <div class="promo-header">
            <h2>Explore</h2>
            <h2>Our Latest</h2>
            <h1>Features</h1>

          </div>
        </section>

        <!-- projects -->
        <section class="sticky-cards">
          <section class="projecr-hero pinned"></section>

          <section class="card pinned">
            <div class="project">
              <div class="project-copy">
                <div class="project-header">
                  <h3>JobMatch AI</h3>
                  <p>01 - 01</p>
                </div>

                <p>
                  JobMatch AI leverages cutting-edge machine learning algorithms to match job seekers with
                  personalized
                  job
                  opportunities, ensuring higher placement success rates.
                </p>

                <div class="project-cta">
                  <p>Learn More</p>
                  <div class="project-cta-row">
                    <div class="cta"><span>Web App</span></div>
                    <div class="cta"><span>Mobile App</span></div>
                  </div>
                </div>
              </div>
              <div class="project-img">
                <img src="./assets/project-1.jpg" alt="" />
              </div>
            </div>
          </section>

          <section class="card pinned">
            <div class="project">
              <div class="project-copy">
                <div class="project-header">
                  <h3>Mentorship Hub</h3>
                  <p>01 - 02</p>
                </div>
                <p>
                  Mentorship Hub connects job seekers with industry experts, providing real-time mentorship and career
                  guidance to elevate career growth.
                </p>

                <div class="project-cta">
                  <p>Learn More</p>
                  <div class="project-cta-row">
                    <div class="cta"><span>Web App</span></div>
                    <div class="cta"><span>Mobile App</span></div>
                  </div>
                </div>
              </div>
              <div class="project-img">
                <img src="./assets/project-2.jpg" alt="" />
              </div>
            </div>
          </section>

          <section class="card pinned">
            <div class="project">
              <div class="project-copy">
                <div class="project-header">
                  <h3>Smart Resume</h3>
                  <p>01 - 03</p>
                </div>
                <p>
                  Smart Resume offers an AI-powered resume analyzer, providing instant feedback and recommendations to
                  optimize resumes for specific job opportunities.
                </p>

                <div class="project-cta">
                  <p>Learn More</p>
                  <div class="project-cta-row">
                    <div class="cta"><span>Web App</span></div>
                    <div class="cta"><span>Mobile App</span></div>
                  </div>
                </div>
              </div>
              <div class="project-img">
                <img src="./assets/project-3.jpg" alt="" />
              </div>
            </div>
          </section>

          <section class="card pinned">
            <div class="project">
              <div class="project-copy">
                <div class="project-header">
                  <h3>Career Insights</h3>
                  <p>01 - 04</p>
                </div>
                <p>
                  Career Insights analyzes market trends, providing job seekers with valuable data-driven insights to
                  make
                  informed decisions about their career paths.
                </p>

                <div class="project-cta">
                  <p>Learn More</p>
                  <div class="project-cta-row">
                    <div class="cta"><span>Web App</span></div>
                    <div class="cta"><span>Mobile App</span></div>
                  </div>
                </div>
              </div>
              <div class="project-img">
                <img src="./assets/project-4.jpg" alt="" />
              </div>
            </div>
          </section>

          <section class="card pinned">
            <div class="project">
              <div class="project-copy">
                <div class="project-header">
                  <h3>JobSync Cloud</h3>
                  <p>01 - 05</p>
                </div>
                <p>
                  JobSync Cloud offers secure cloud storage and management for all job application materials,
                  including
                  resumes, cover letters, and portfolio files.
                </p>

                <div class="project-cta">
                  <p>Learn More</p>
                  <div class="project-cta-row">
                    <div class="cta"><span>Web App</span></div>
                    <div class="cta"><span>Mobile App</span></div>
                  </div>
                </div>
              </div>
              <div class="project-img">
                <img src="./assets/project-5.jpg" alt="" />
              </div>
            </div>
          </section>

          <section class="card scroll">
            <div class="project">
              <div class="project-copy">
                <div class="project-header">
                  <h3>JobSync Security</h3>
                  <p>01 - 06</p>
                </div>
                <p>
                  JobSync Security ensures data protection for both job seekers and employers, utilizing encryption
                  and
                  multi-factor authentication to safeguard sensitive information.
                </p>

                <div class="project-cta">
                  <p>Learn More</p>
                  <div class="project-cta-row">
                    <div class="cta"><span>Web App</span></div>
                    <div class="cta"><span>Mobile App</span></div>
                  </div>
                </div>
              </div>
              <div class="project-img">
                <img src="./assets/project-6.jpg" alt="" />
              </div>
            </div>
          </section>

          <section class="footer"></section>
        </section>

        <!-- prices  -->
        <section class="prices-hero" id="prices">
          <div class="prices-bg">
            <img src="./assets/grad.png" alt="" />
          </div>
          <div class="prices-hero-header">
            <h1>Pricing</h1>
            <h3>Flexible Plans</h3>
          </div>
        </section>

        <!-- prices -->
        <section class="prices">
          <div class="prices-header">
            <div class="prices-col"></div>
            <div class="prices-col">
              <h2>
                Choose from our flexible subscription plans designed to streamline your hiring process and optimize
                talent
                acquisition.
                <span style="opacity: 0">.</span>
              </h2>

              <p class="prices-copy">
                Whether you're a startup, enterprise, or recruiter, our plans offer continuous access to AI-driven
                hiring
                tools and expert support.
              </p>
            </div>
          </div>

          <div class="prices-cta">
            <a href="#">
              <h1>Plans Starting From</h1>
              <h1>INR 199 / Month</h1>
            </a>
          </div>
        </section>

        <!-- features -->
        <section class="features">
          <div class="features-col">
            <div class="features-row">
              <div class="features-item">
                <div class="features-icon">
                  <img src="./assets/feature-1.png" alt="" />
                </div>
                <div class="features-title">
                  <h2>TRANSPARENT WEEKLY UPDATES</h2>
                  <p>
                    Our projects are managed in sprints. We collaborate with you
                    to define objectives, break down the development process into
                    manageable tasks, and deliver weekly progress reports.
                  </p>
                </div>
              </div>
              <div class="features-item">
                <div class="features-icon">
                  <img src="./assets/feature-2.png" alt="" />
                </div>
                <div class="features-title">
                  <h2>REAL-TIME MENTORSHIP</h2>
                  <p>
                    Get instant guidance from industry experts and hiring managers. Receive resume reviews, career
                    advice,
                    and mock interviews tailored to your profile.
                  </p>
                </div>
              </div>
            </div>
            <div class="features-row">
              <div class="features-item">
                <div class="features-icon">
                  <img src="./assets/feature-3.png" alt="" />
                </div>
                <div class="features-title">
                  <h2>SMART CAREER INSIGHTS</h2>
                  <p>
                    Gain valuable data-driven insights on salary trends, skill demand, and industry growth to make
                    informed
                    career decisions.
                  </p>
                </div>
              </div>
              <div class="features-item">
                <div class="features-icon">
                  <img src="./assets/feature-4.png" alt="" />
                </div>
                <div class="features-title">
                  <h2>WEEKLY PROGRESS TRACKING</h2>
                  <p>
                    Stay on top of your job search with structured weekly progress reports, application tracking, and
                    personalized goal setting.
                  </p>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- contact section -->
        <section id="contact">
          <div class="footer-bg">
            <img src="./assets/grad.png" alt="" />
          </div>
          <div class="footer-header">
            <h1>Let's</h1>
            <h1>Talk</h1>
          </div>
          <div class="footer-sub-header">
            <h2>Fill the form</h2>
            <h2>and</h2>
            <h2>Get in touch</h2>
          </div>

          <div class="footer-ctas">
            <div class="footer-ctas-col">
              <div class="footer-cta-icon">
                <a href="https://www.instagram.com/jobsync_in" target="_blank">
                  <ion-icon name="logo-instagram"></ion-icon>
                </a>
              </div>
              <div class="footer-cta-icon">
                <a href="https://www.youtube.com/@JobSync" target="_blank">
                  <ion-icon name="logo-youtube"></ion-icon>
                </a>
              </div>
            </div>
            <div class="footer-ctas-col">
              <div class="footer-cta-icon">
                <a href="#hero"><ion-icon name="arrow-up-sharp"></ion-icon></a>
              </div>
            </div>
          </div>

          <form id="contact-form" novalidate>

            <div class="footer-form">
              <div class="form-col">
                <div class="form-row">
                  <div class="form-field-wrapper">
                    <input type="text" name="user_name" placeholder="Your Name" aria-describedby="user_name_error" />
                    <div class="error-container" id="user_name_error"></div>
                  </div>

                  <div class="form-field-wrapper">
                    <input type="text" name="user_role" placeholder="Your Role" aria-describedby="user_role_error" />
                    <div class="error-container" id="user_role_error"></div>
                  </div>

                </div>
                <div class="form-row">
                  <div class="form-field-wrapper">
                    <input type="email" name="user_email" placeholder="Email" aria-describedby="user_email_error" />
                    <div class="error-container" id="user_email_error"></div>
                  </div>

                </div>
                <div class="form-row">
                  <div class="form-field-wrapper">
                    <input type="text" name="portfolio_link" placeholder="Portfolio Link(Optional)"
                      aria-describedby="portfolio_link_error" />
                  </div>

                </div>
                <div class="form-row">
                  <div class="form-field-wrapper">
                    <textarea name="message" rows="4" placeholder="Message" aria-describedby="message_error"></textarea>
                    <div class="error-container" id="message_error"></div>
                  </div>

                </div>
              </div>

              <div class="form-col">
                <div class="submit-btn">
                  <button type="submit">
                    <h3>Send</h3>
                  </button>
                </div>
              </div>
            </div>
          </form>
        </section>

        <!-- footer -->
        <footer class="site-footer">
          <div class="footer-copyright">
            <p>JOBSYNC Web</p>
            <p>Privacy Policy</p>
          </div>
        </footer>
      </div>

      <!-- chatbot modal -->
      <div id="chatbot-modal" class="chatbot-modal">
        <div class="chatbot-modal-content">
          <div class="chat">
            <div class="chat-title">
              <h1>JobSync</h1>
              <h2>AI Assistant</h2>
              <figure class="avatar">
                <img
                  src="https://res.cloudinary.com/dcf0cpuqf/image/upload/v1748343989/Screenshot_2025-05-27_163609_zq6kzu.png" />
              </figure>
              <button class="close-chatbot" title="Close">&times;</button>
            </div>
            <div class="messages">
              <div class="messages-content"></div>
            </div>
            <div class="message-box">
              <textarea class="message-input" placeholder="Type message..."></textarea>
              <button type="submit" class="message-submit">Send</button>
            </div>
          </div>
        </div>
      </div>

      <!-- chatbot floating button -->
      <button id="chatbot-btn" class="floating-chatbot-btn" title="Chat with AI">
        <span class="chatbot-svg-icon" aria-hidden="true">
          <svg width="32" height="32" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
            <defs>
              <linearGradient id="orangeGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#FF6B35;stop-opacity:1" />
                <stop offset="50%" style="stop-color:#FF8E53;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#FFB366;stop-opacity:1" />
              </linearGradient>
              <filter id="blur" x="-50%" y="-50%" width="200%" height="200%">
                <feGaussianBlur in="SourceGraphic" stdDeviation="0.5" />
              </filter>
              <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
                <feGaussianBlur stdDeviation="2" result="coloredBlur" />
                <feMerge>
                  <feMergeNode in="coloredBlur" />
                  <feMergeNode in="SourceGraphic" />
                </feMerge>
              </filter>
            </defs>
            <path
              d="M12 32 C12 24, 18 18, 26 18 L42 18 C50 18, 56 24, 56 32 L56 40 C56 48, 50 54, 42 54 L28 54 L18 60 L18 54 C14 52, 12 46, 12 40 Z"
              fill="url(#orangeGradient)" filter="url(#glow)" opacity="0.9" />
            <path
              d="M8 20 C8 12, 14 6, 22 6 L38 6 C46 6, 52 12, 52 20 L52 28 C52 36, 46 42, 38 42 L24 42 L14 48 L14 42 C10 40, 8 34, 8 28 Z"
              fill="rgba(255, 255, 255, 0.25)" stroke="rgba(255, 255, 255, 0.3)" stroke-width="1" filter="url(#blur)"
              backdrop-filter="blur(10px)" />
            <path
              d="M22 6 C14 6, 8 12, 8 20 L8 22 C8 14, 14 8, 22 8 L38 8 C42 8, 45 9, 48 11 C50 9, 52 7, 52 4 C49 4, 46 5, 42 6 Z"
              fill="rgba(255, 255, 255, 0.4)" opacity="0.6" />
            <circle cx="30" cy="16" r="1.5" fill="rgba(255, 255, 255, 0.6)" />
            <circle cx="36" cy="16" r="1.5" fill="rgba(255, 255, 255, 0.6)" />
            <circle cx="42" cy="16" r="1.5" fill="rgba(255, 255, 255, 0.6)" />
          </svg>
        </span>
        <span class="chatbot-btn-text"> Chatbot</span>
      </button>

      <script src="https://unpkg.com/lenis@1.1.4/dist/lenis.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
      <script src="https://unpkg.com/gsap@3/dist/ScrollTrigger.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/split-type@0.3.4/umd/index.min.js"></script>

      <script>
        window.csrfToken = '<%= csrfToken %>';
      </script>
      <script src="./js/form.js"></script>
      <script src="./js/loader.js"></script>
      <script src="/js/validation.js"></script>


      <script src="./js/lenis.js"></script>

      <script src="./js/menu.js"></script>
      <script src="./js/about.js"></script>
      <script src="./js/projects.js"></script>
      <script src="./js/prices.js"></script>

      <script>
        // Make CSRF token available globally
        window.csrfToken = '<%= csrfToken %>';

        // Auto-hide flash messages after 5 seconds
        setTimeout(() => {
          const flashMessages = document.querySelectorAll('.flash-message');
          flashMessages.forEach(msg => {
            msg.style.animation = 'slideIn 0.3s ease reverse';
            setTimeout(() => msg.remove(), 300);
          });
        }, 5000);

        // Resend verification email function
        function resendVerification() {
          if (confirm('Are you sure you want to resend the verification email?')) {
            const form = document.createElement('form');
            form.method = 'POST';
            form.action = '/resend-verification';
            document.body.appendChild(form);
            form.submit();
          }
        }

        // Smooth scroll for anchor links
        document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
          anchor.addEventListener("click", function (e) {
            e.preventDefault();

            const targetId = this.getAttribute("href");

            // Use Lenis scroll method for smooth scrolling
            if (window.lenisScrollTo) {
              window.lenisScrollTo(targetId);
            } else {
              // Fallback to scrollIntoView if Lenis is not available
              document.querySelector(targetId).scrollIntoView({
                behavior: "smooth",
              });
            }
          });
        });

        // Chatbot functionality
        let conversationHistory = [];
        const chatbotModal = document.getElementById('chatbot-modal');
        const chatbotBtn = document.getElementById('chatbot-btn');
        const closeChatbotBtn = document.querySelector('.close-chatbot');
        const messagesContent = document.querySelector('.messages-content');
        const messageInput = document.querySelector('.message-input');
        const messageSubmit = document.querySelector('.message-submit');

        // Open chatbot modal
        chatbotBtn.addEventListener('click', () => {
          chatbotModal.classList.add('show');
          initChat();
          messageInput.focus();
          // Ensure scrolling is enabled
          setTimeout(() => {
            const messagesContainer = document.querySelector('.messages');
            if (messagesContainer) {
              messagesContainer.style.overflowY = 'auto';
              scrollToBottom();
            }
          }, 100);
        });

        // Close chatbot modal
        closeChatbotBtn.addEventListener('click', () => {
          chatbotModal.classList.remove('show');
        });

        // Initialize chat
        function initChat() {
          if (messagesContent.children.length === 0) {
            addMessage("Hello! I'm your JobSync assistant. How can I help you today?", false);
          }

          // Set up resize observer for scrolling
          if (window.ResizeObserver) {
            const messagesContainer = document.querySelector('.messages');
            if (messagesContainer && !messagesContainer.resizeObserver) {
              const resizeObserver = new ResizeObserver(() => {
                scrollToBottom();
              });
              resizeObserver.observe(messagesContent);
              messagesContainer.resizeObserver = resizeObserver;
            }
          }
        }

        // Format structured text
        function formatMessageContent(text) {
          // Check if the text contains numbered lists
          const numberedListRegex = /^\s*(\d+)\.\s+(.+)$/gm;
          const bulletListRegex = /^\s*[-â€¢]\s+(.+)$/gm;

          let formattedText = text;

          // Handle numbered lists
          if (numberedListRegex.test(text)) {
            formattedText = text.replace(/^(\s*\d+\.\s+.+)$/gm, (match, content) => {
              return `<div class="list-item numbered">${content}</div>`;
            });

            // Wrap in list container
            formattedText = `<div class="structured-list">${formattedText}</div>`;
          }
          // Handle bullet lists
          else if (bulletListRegex.test(text)) {
            formattedText = text.replace(/^(\s*[-â€¢]\s+.+)$/gm, (match, content) => {
              return `<div class="list-item bulleted">${content}</div>`;
            });

            // Wrap in list container
            formattedText = `<div class="structured-list">${formattedText}</div>`;
          }
          // Handle line breaks for regular text
          else {
            formattedText = text.replace(/\n/g, '<br>');
          }

          return formattedText;
        }

        // Add message to chat
        function addMessage(text, isUser = true, isError = false) {
          const messageDiv = document.createElement('div');
          messageDiv.className = `message ${isUser ? 'message-personal' : ''} ${isError ? 'error-message' : ''} new`;

          if (!isUser) {
            const formattedContent = formatMessageContent(text);
            messageDiv.innerHTML = `
              <figure class="avatar">
                <img src="https://res.cloudinary.com/dcf0cpuqf/image/upload/v1748343989/Screenshot_2025-05-27_163609_zq6kzu.png" />
              </figure>
              <div class="message-content">${formattedContent}</div>
            `;
          } else {
            messageDiv.textContent = text;
          }

          messagesContent.appendChild(messageDiv);
          setTimestamp(messageDiv);

          // Force a reflow and then scroll
          messageDiv.offsetHeight;
          scrollToBottom();
        }

        // Add loading message
        function addLoadingMessage() {
          const loadingDiv = document.createElement('div');
          loadingDiv.className = 'message loading new';
          loadingDiv.innerHTML = `
            <figure class="avatar">
              <img src="https://res.cloudinary.com/dcf0cpuqf/image/upload/v1748343989/Screenshot_2025-05-27_163609_zq6kzu.png" />
            </figure>
            <span></span>
          `;
          messagesContent.appendChild(loadingDiv);
          scrollToBottom();
          return loadingDiv;
        }

        // Remove loading message
        function removeLoadingMessage(loadingElement) {
          if (loadingElement && loadingElement.parentNode) {
            loadingElement.parentNode.removeChild(loadingElement);
            // Ensure scroll after removing loading
            setTimeout(scrollToBottom, 50);
          }
        }

        // Set timestamp
        function setTimestamp(messageElement) {
          const now = new Date();
          const timestamp = document.createElement('div');
          timestamp.className = 'timestamp';
          timestamp.textContent = `${now.getHours()}:${now.getMinutes().toString().padStart(2, '0')}`;
          messageElement.appendChild(timestamp);
        }

        // Scroll to bottom
        function scrollToBottom() {
          const messages = document.querySelector('.messages');
          if (messages) {
            setTimeout(() => {
              messages.scrollTop = messages.scrollHeight;
            }, 100);
          }
        }

        // Send message to backend API
        async function sendMessage(message) {
          try {
            const response = await fetch('/api/chat', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
              },
              body: JSON.stringify({ message: message })
            });

            if (!response.ok) {
              const errorData = await response.json();
              throw new Error(errorData.error || `HTTP error! status: ${response.status}`);
            }

            const data = await response.json();
            return data.response;

          } catch (error) {
            console.error('Error sending message:', error);
            throw error;
          }
        }

        // Handle message sending
        async function handleSendMessage() {
          const message = messageInput.value.trim();
          if (!message) return;

          // Disable send button
          messageSubmit.disabled = true;
          // messageSubmit.textContent = 'Sending...';

          // Add user message
          addMessage(message, true);
          conversationHistory.push({ role: 'user', content: message });

          // Clear input
          messageInput.value = '';

          // Show loading
          const loadingElement = addLoadingMessage();

          try {
            // Send to backend API
            const response = await sendMessage(message);

            // Remove loading and add response
            removeLoadingMessage(loadingElement);
            addMessage(response, false);
            conversationHistory.push({ role: 'assistant', content: response });

          } catch (error) {
            // Remove loading and show error
            removeLoadingMessage(loadingElement);
            addMessage('Sorry, I encountered an error. Please try again.', false, true);
            console.error('Chat error:', error);
          }

          // Re-enable send button
          messageSubmit.disabled = false;
          messageSubmit.textContent = 'Send';
          messageInput.focus();
        }

        // Event listeners for chatbot
        if (messageSubmit) {
          messageSubmit.addEventListener('click', handleSendMessage);
        }

        if (messageInput) {
          messageInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
              e.preventDefault();
              handleSendMessage();
            }
          });
        }

        // Close modal with Escape key
        document.addEventListener('keydown', (e) => {
          if (e.key === 'Escape' && chatbotModal.classList.contains('show')) {
            chatbotModal.classList.remove('show');
          }
        });

        // Add click handlers for scrolling debug
        document.addEventListener('DOMContentLoaded', () => {
          // Force enable scrolling on the messages container
          const messagesContainer = document.querySelector('.messages');
          if (messagesContainer) {
            messagesContainer.addEventListener('wheel', (e) => {
              // Ensure wheel events work for scrolling
              e.stopPropagation();
            }, { passive: true });

            // Add touch scrolling for mobile
            messagesContainer.addEventListener('touchmove', (e) => {
              e.stopPropagation();
            }, { passive: true });
          }
        });
      </script>
</body>

</html>